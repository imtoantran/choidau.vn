// jQuery Alert Dialogs Plugin
//
// Version 1.1
//
// Cory S.N. LaViska
// A Beautiful Site (http://abeautifulsite.net/)
// 14 May 2009
//
// Visit http://abeautifulsite.net/notebook/87 for more information
//
// Usage:
//		jAlert( message, [title, callback] )
//		jConfirm( message, [title, callback] )
//		jPrompt( message, [value, title, callback] )
// 
// History:
//
//		1.00 - Released (29 December 2008)
//
//		1.01 - Fixed bug where unbinding would destroy all resize events
//
// License:
// 
// This plugin is dual-licensed under the GNU General Public License and the MIT License and
// is copyright 2008 A Beautiful Site, LLC. 
//
!function(p){p.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,alert:function(o,e,t){null==e&&(e="Alert"),p.alerts._show(e,o,null,"alert",function(p){t&&t(p)})},confirm:function(o,e,t){null==e&&(e="Confirm"),p.alerts._show(e,o,null,"confirm",function(p){t&&t(p)})},prompt:function(o,e,t,i){null==t&&(t="Prompt"),p.alerts._show(t,o,e,"prompt",function(p){i&&i(p)})},_show:function(o,e,t,i,n){p.alerts._hide(),p.alerts._overlay("show"),p("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_message"></div></div></div>'),p.alerts.dialogClass&&p("#popup_container").addClass(p.alerts.dialogClass);var a=p.browser.msie&&parseInt(p.browser.version)<=6?"absolute":"fixed";switch(p("#popup_container").css({position:a,zIndex:99999,padding:0,margin:0}),p("#popup_title").text(o),p("#popup_content").addClass(i),p("#popup_message").text(e),p("#popup_message").html(p("#popup_message").text().replace(/\n/g,"<br />")),p("#popup_container").css({minWidth:p("#popup_container").outerWidth(),maxWidth:p("#popup_container").outerWidth()}),p.alerts._reposition(),p.alerts._maintainPosition(!0),i){case"alert":p("#popup_message").after('<div id="popup_panel"><input type="button" value="'+p.alerts.okButton+'" id="popup_ok" /></div>'),p("#popup_ok").click(function(){p.alerts._hide(),n(!0)}),p("#popup_ok").focus().keypress(function(o){(13==o.keyCode||27==o.keyCode)&&p("#popup_ok").trigger("click")});break;case"confirm":p("#popup_message").after('<div id="popup_panel"><input type="button" value="'+p.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+p.alerts.cancelButton+'" id="popup_cancel" /></div>'),p("#popup_ok").click(function(){p.alerts._hide(),n&&n(!0)}),p("#popup_cancel").click(function(){p.alerts._hide(),n&&n(!1)}),p("#popup_ok").focus(),p("#popup_ok, #popup_cancel").keypress(function(o){13==o.keyCode&&p("#popup_ok").trigger("click"),27==o.keyCode&&p("#popup_cancel").trigger("click")});break;case"prompt":p("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><input type="button" value="'+p.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+p.alerts.cancelButton+'" id="popup_cancel" /></div>'),p("#popup_prompt").width(p("#popup_message").width()),p("#popup_ok").click(function(){var o=p("#popup_prompt").val();p.alerts._hide(),n&&n(o)}),p("#popup_cancel").click(function(){p.alerts._hide(),n&&n(null)}),p("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(o){13==o.keyCode&&p("#popup_ok").trigger("click"),27==o.keyCode&&p("#popup_cancel").trigger("click")}),t&&p("#popup_prompt").val(t),p("#popup_prompt").focus().select()}if(p.alerts.draggable)try{p("#popup_container").draggable({handle:p("#popup_title")}),p("#popup_title").css({cursor:"move"})}catch(r){}},_hide:function(){p("#popup_container").remove(),p.alerts._overlay("hide"),p.alerts._maintainPosition(!1)},_overlay:function(o){switch(o){case"show":p.alerts._overlay("hide"),p("BODY").append('<div id="popup_overlay"></div>'),p("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:p(document).height(),background:p.alerts.overlayColor,opacity:p.alerts.overlayOpacity});break;case"hide":p("#popup_overlay").remove()}},_reposition:function(){var o=p(window).height()/2-p("#popup_container").outerHeight()/2+p.alerts.verticalOffset,e=p(window).width()/2-p("#popup_container").outerWidth()/2+p.alerts.horizontalOffset;0>o&&(o=0),0>e&&(e=0),p.browser.msie&&parseInt(p.browser.version)<=6&&(o+=p(window).scrollTop()),p("#popup_container").css({top:o+"px",left:e+"px"}),p("#popup_overlay").height(p(document).height())},_maintainPosition:function(o){if(p.alerts.repositionOnResize)switch(o){case!0:p(window).bind("resize",p.alerts._reposition);break;case!1:p(window).unbind("resize",p.alerts._reposition)}}},jAlert=function(o,e,t){p.alerts.alert(o,e,t)},jConfirm=function(o,e,t){p.alerts.confirm(o,e,t)},jPrompt=function(o,e,t,i){p.alerts.prompt(o,e,t,i)}}(jQuery);