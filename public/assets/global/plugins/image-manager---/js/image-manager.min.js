/*!
 * jQuery Image Manager Plugin 
 * Author: Homilor.
 * Author Website: http://www.dvlweb.net/
 * Version: 1.0.0
 **/
function load_allImage(){var e=URL_IMAGE_MANAGER+"all_images.php";$.ajax({url:e,data:{user_id:user_id},dataType:"json",success:function(e){var a=$("#imageManager_allImage");a.text("");for(var t=0;t<e.length;t++)a.prepend('<input id="'+e[t].pid[0]+'" type="radio" name="example" value="'+URL_IMAGE_MANAGER+e[t].image_source[0]+'" class="radioImageSelect" data-image="'+URL_IMAGE_MANAGER+e[t].thumbnail_source[0]+'" data-title="'+e[t].title[0]+'" data-image_name="'+e[t].image_name[0]+'" data-image_size="'+e[t].image_size[0]+'" data-thumbnail_name="'+e[t].thumbnail_name[0]+'" />');$("input.radioImageSelect").radioImageSelect(),$("img.radio-select-img-item").on("click",function(){$(".cover_title").html($(this).attr("title")),$(".cover_image_name").html($(this).attr("image_name")),$(".cover_image_size").html($(this).attr("image_size")),$(".cover_thumbnail_name").html($(this).attr("thumbnail_name")),$("#imageManager_removeImage").removeAttr("disabled")})}})}!function(e){e.fn.radioImageSelect=function(a){var t={imgItemClass:"radio-select-img-item",imgItemCheckedClass:"item-checked",hideLabel:!0},i=function(t){var i=t.prev('input[type="radio"]').attr("name");e('input[name="'+i+'"]').each(function(){var t=e(this).next("img");e(this).prop("checked")?t.addClass(a.imgItemCheckedClass):t.removeClass(a.imgItemCheckedClass)})};return a=e.extend(t,a),this.each(function(){e(this).hide().after('<img src="'+e(this).data("image")+'" title="'+e(this).data("title")+'" image_name="'+e(this).data("image_name")+'" image_size="'+e(this).data("image_size")+'" thumbnail_name="'+e(this).data("thumbnail_name")+'" alt="radio image" />');var t=e(this).next("img");t.addClass(a.imgItemClass),a.hideLabel&&e("label[for="+e(this).attr("id")+"]").hide(),e(this).prop("checked")&&t.addClass(a.imgItemCheckedClass),t.on("click",function(){e(this).prev('input[type="radio"]').attr("checked","checked").trigger("change"),i(e(this))})})}}(jQuery),$("#imageManager_allImage").scroll(),$("#imageManger_inputFile").on("change",function(){var e=this.files?this.files:[];if(e.length&&window.FileReader&&/^image/.test(e[0].type)){var a=new FileReader;a.readAsDataURL(e[0]),a.onloadend=function(){$("#upload_imagePreview img").attr("src",this.result)}}});var fileInput=document.getElementById("imageManger_inputFile"),form=document.getElementById("imageManager_uploadForm");form.addEventListener("submit",function(e){e.preventDefault();var a=URL_IMAGE_MANAGER+"upload.php",t=fileInput.files[0],i=new FormData($(this)[0]);i.append("file",t),i.append("user_id",user_id);var r=new XMLHttpRequest;r.open("POST",a,!0),r.upload.onprogress=function(e){if($("#imageManager_startUpload").attr("disabled","disabled"),e.lengthComputable){var a=e.loaded/e.total*100+"%";$(".sr-only").innerHTML=a,$(".progress-bar").attr("style","width: "+a)}},r.onload=function(){200==this.status&&(alert(this.response),$("#imageManager_startUpload").removeAttr("disabled"),$(".progress-bar").attr("style","width: 0%"),$("#imageManager_removeImage").attr("disabled","disabled"),load_allImage())},r.send(i)},!1),$("#imageManager_removeImage").on("click",function(){var e=$("input:radio[name='example']:checked");$.get(URL_IMAGE_MANAGER+"del_node.php",{user_id:user_id,cover_id:e.attr("id")},function(){$("img.item-checked").fadeOut(),$(".cover_title, .cover_image_name, .cover_image_size, .cover_thumbnail_name").html(""),e.val(""),e.attr("data-title",""),$(".imagePreview").attr("src",""),$(".imagePreview").attr("title",""),$("#imageManager_removeImage").attr("disabled","disabled")})}),$(".imageManager_openModal").click(function(){$(".cover_title, .cover_image_name, .cover_image_size, .cover_thumbnail_name").html(""),$("#imageManager_removeImage").attr("disabled","disabled"),load_allImage()});